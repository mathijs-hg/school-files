<!-- 
EMBA - EMBEDDED LINUX ANALYZER

Copyright 2020-2023 Siemens AG
Copyright 2020-2024 Siemens Energy AG

EMBA comes with ABSOLUTELY NO WARRANTY. This is free software, and you are
welcome to redistribute it under the terms of the GNU General Public License.
See LICENSE file for usage of this software.

EMBA is licensed under GPLv3

Author(s) and contributors from the EMBA project are listed here: https://github.com/e-m-b-a/emba/blob/master/CONTRIBUTORS.md
-->

<!-- Used icons: https://github.com/CoreyGinnivan/system-uicons -->
 
<!DOCTYPE html>
<html lang="en">
<head>
  <title>EMBA firmware report</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./../../style/style.css" type="text/css">
  <link rel="icon" type="image/png" href="./../../style/favicon.png">
</head>
<body>

<div id="sidenav" class="side">
  <div id="logo">
    <a class="inherit" href="./../../index.html"><img class="inherit" id="logoImage" src="./../../style/emba.svg" alt="logo"></a>
  </div>
  <div id="nav">
      <a id="embark" class="hidden" href="{{ embarkBackUrl }}">&laquo; Back to EMBArk</a> <!-- nosem -->
      <a class="backButton" href="./../../index.html">&laquo; Back to main</a>
<a class="modul" href="./../semgrep_ntpclient.html" title="./../semgrep_ntpclient.html" >&laquo; Back to semgrep_ntpclient</a>
      <!-- navigation start -->
      <!-- navigation end -->
      <input id="expand" class="expand_njs hidden" type="button" value="More results:" onclick="this.value=this.value=='+ Show more results'?'- Hide more results':'+ Show more results';">
      <div class="expand_area">
        <!-- etc start -->
        <!-- etc end -->
      </div>
  </div>
  <a href="TIMELINK"><div id="buttonTimeInvisible" class="rectButton"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="40" height="40" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 21 21"><g fill="none" fill-rule="evenodd" stroke="white" stroke-linecap="round" stroke-linejoin="round" transform="matrix(-1 0 0 1 19 2)"><circle cx="8.5" cy="8.5" r="8"/><path d="M8.5 5.5v4H5"/></g></svg></div></a>
  <div id="buttonSizer" class="rectButton buttonClose" onclick="buttonNav()"></div>
</div>
<div id="main" class="main">
  <!-- content start -->
<br />
<pre>/* WARNING: Could not reconcile some variable overlaps */</pre>
<br />
<pre>bool FUN_004010e8(uint param_1,int *param_2)</pre>
<br />
<pre>{</pre>
<pre>  bool bVar1;</pre>
<pre>  sockaddr *psVar2;</pre>
<pre>  __fd_mask *p_Var3;</pre>
<pre>  int iVar4;</pre>
<pre>  int *piVar5;</pre>
<pre>  ssize_t sVar6;</pre>
<pre>  char *pcVar7;</pre>
<pre>  sockaddr *psVar8;</pre>
<pre>  __fd_mask *p_Var9;</pre>
<pre>  uint uVar10;</pre>
<pre>  uint uVar11;</pre>
<pre>  int iVar12;</pre>
<pre>  undefined8 uVar13;</pre>
<pre>  undefined8 uVar14;</pre>
<pre>  __fd_mask local_1e0 [32];</pre>
<pre>  undefined local_160 [16];</pre>
<pre>  socklen_t local_150;</pre>
<pre>  timeval local_14c;</pre>
<pre>  uint local_144;</pre>
<pre>  uint local_140;</pre>
<pre>  int local_13c;</pre>
<pre>  uint local_138;</pre>
<pre>  undefined4 local_134;</pre>
<pre>  uint local_130;</pre>
<pre>  int local_12c;</pre>
<pre>  uint local_128;</pre>
<pre>  timespec local_124;</pre>
<pre>  sockaddr *local_11c;</pre>
<pre>  undefined4 local_118;</pre>
<pre>  undefined4 local_114;</pre>
<pre>  undefined4 local_110;</pre>
<pre>  undefined4 local_10c;</pre>
<pre>  undefined4 local_108;</pre>
<pre>  undefined4 local_104;</pre>
<pre>  undefined4 local_100;</pre>
<pre>  int local_fc;</pre>
<pre>  int local_f8;</pre>
<pre>  undefined8 local_a0;</pre>
<pre>  int *local_98;</pre>
<pre>  undefined8 local_90;</pre>
<pre>  undefined8 local_88;</pre>
<pre>  undefined8 local_80;</pre>
<pre>  undefined8 local_78;</pre>
<pre>  char *local_70;</pre>
<pre>  uint local_6c;</pre>
<pre>  uint local_68;</pre>
<pre>  uint local_64;</pre>
<pre>  undefined4 local_60;</pre>
<pre>  undefined4 local_5c;</pre>
<pre>  undefined4 local_58;</pre>
<pre>  undefined4 local_54;</pre>
<pre>  char *local_50;</pre>
<pre>  char *local_4c;</pre>
<pre>  char *local_48;</pre>
<pre>  char *local_44;</pre>
<pre>  char *local_40;</pre>
<pre>  char *local_3c;</pre>
<pre>  uint local_38;</pre>
<pre>  uint local_34;</pre>
<pre>  uint local_30;</pre>
<pre>  int *local_2c;</pre>
<pre>  </pre>
<pre>  if (debug != 0) {</pre>
<pre>    puts("Listening...");</pre>
<pre>  }</pre>
<pre>  local_150 = 0x10;</pre>
<pre>  local_14c.tv_sec = 0;</pre>
<pre>  local_14c.tv_usec = 0;</pre>
<pre>  uVar11 = 1 &lt;&lt; (param_1 &amp; 0x1f);</pre>
<pre>  local_98 = param_2;</pre>
<pre>  iVar12 = 0;</pre>
<pre>  p_Var9 = local_1e0 + (param_1 &gt;&gt; 5);</pre>
<pre>  local_5c = 0;</pre>
<pre>  local_60 = 0x3fe00000;</pre>
<pre>  local_54 = 0;</pre>
<pre>  local_58 = 0x402e8480;</pre>
<pre>  local_50 = "LI==3";</pre>
<pre>  local_4c = "STRATUM==0";</pre>
<pre>  local_48 = "abs(DISP)&gt536";</pre>
<pre>  local_44 = "abs(DELAY)&gt536";</pre>
<pre>  local_40 = "XMT==0";</pre>
<pre>  local_70 = "ORG!=sent";</pre>
<pre>  local_3c = "MODE!=3";</pre>
<pre>  local_a0 = CONCAT44(local_a0._0_4_,local_a0._4_4_);</pre>
<pre>LAB_00401200:</pre>
<pre>  while( true ) {</pre>
<pre>    p_Var3 = local_1e0;</pre>
<pre>    do {</pre>
<pre>      *p_Var3 = 0;</pre>
<pre>      p_Var3 = p_Var3 + 1;</pre>
<pre>    } while (p_Var3 != (__fd_mask *)local_160);</pre>
<pre>    *p_Var9 = *p_Var9 | uVar11;</pre>
<pre>    iVar4 = select(param_1 + 1,(fd_set *)local_1e0,(fd_set *)0x0,(fd_set *)0x0,&amp;local_14c);</pre>
<pre>    if ((iVar4 == 1) &amp;&amp; ((uVar11 &amp; *p_Var9) != 0)) break;</pre>
<pre>    if (iVar4 &lt; 0) {</pre>
<pre>      piVar5 = __errno_location();</pre>
<pre>      if (*piVar5 != 4) {</pre>
<pre>        perror("select");</pre>
<pre>      }</pre>
<pre>    }</pre>
<pre>    else if (local_14c.tv_sec == 0) {</pre>
<pre>      if ((param_2[4] &lt;= iVar12) &amp;&amp; (bVar1 = false, param_2[4] != 0)) goto LAB_00401e08;</pre>
<pre>      if (debug != 0) {</pre>
<pre>        fwrite("Sending ...\n",1,0xc,stderr);</pre>
<pre>      }</pre>
<pre>      local_118 = 0;</pre>
<pre>      local_114 = 0;</pre>
<pre>      local_110 = 0;</pre>
<pre>      local_10c = 0;</pre>
<pre>      local_108 = 0;</pre>
<pre>      local_104 = 0;</pre>
<pre>      local_100 = 0;</pre>
<pre>      local_fc = 0;</pre>
<pre>      local_f8 = 0;</pre>
<pre>      local_124.tv_sec = 0x1b0004fa;</pre>
<pre>      local_124.tv_nsec = 0x10000;</pre>
<pre>      local_11c = (sockaddr *)0x10000;</pre>
<pre>      FUN_00401048(local_98,param_2 + 1);</pre>
<pre>      local_fc = *param_2;</pre>
<pre>      local_f8 = param_2[1];</pre>
<pre>      send(param_1,&amp;local_124,0x30,0);</pre>
<pre>      iVar12 = iVar12 + 1;</pre>
<pre>      local_14c.tv_sec = param_2[5];</pre>
<pre>      local_14c.tv_usec = 0;</pre>
<pre>    }</pre>
<pre>  }</pre>
<pre>  psVar8 = (sockaddr *)local_160;</pre>
<pre><span class="green"><span class="green">  sVar6 = recvfrom(param_1,&amp;DAT_00415194,0x514,0,psVar8,&amp;local_150)</span></span></span></pre>
<pre>  local_a0._0_4_ = param_2[6];</pre>
<pre>  if (sVar6 &lt; 0) {</pre>
<pre>    perror("recvfrom");</pre>
<pre>    bVar1 = false;</pre>
<pre>  }</pre>
<pre>  else if (sVar6 - 1U &lt; 0x513) {</pre>
<pre>    FUN_00401048(&amp;local_144,&amp;local_140);</pre>
<pre>    if (debug != 0) {</pre>
<pre>      printf("packet of length %d received\n",sVar6);</pre>
<pre>      if (local_160._0_2_ == 2) {</pre>
<pre>        uVar10 = (uint)local_160._2_2_;</pre>
<pre>        pcVar7 = inet_ntoa(local_160._4_4_);</pre>
<pre>        printf("Source: INET Port %d host %s\n",uVar10,pcVar7);</pre>
<pre>      }</pre>
<pre>      else {</pre>
<pre>        printf("Source: Address family %d\n");</pre>
<pre>      }</pre>
<pre>    }</pre>
<pre>    local_a0 = CONCAT44(local_a0._0_4_,local_a0._4_4_);</pre>
<pre>    if (local_160._2_2_ != 0x7b) goto LAB_00401200;</pre>
<pre>    local_68 = DAT_00415194 &gt;&gt; 0x1e;</pre>
<pre>    local_38 = DAT_00415194 &gt;&gt; 0x1b &amp; 7;</pre>
<pre>    local_34 = DAT_00415194 &gt;&gt; 0x18 &amp; 7;</pre>
<pre>    local_30 = DAT_00415194 &gt;&gt; 0x10 &amp; 0xff;</pre>
<pre>    uVar10 = DAT_00415194 &amp; 0xff;</pre>
<pre>    if ((DAT_00415194 &amp; 0x80) != 0) {</pre>
<pre>      uVar10 = uVar10 | 0xffffff00;</pre>
<pre>    }</pre>
<pre>    local_88._0_4_ = DAT_00415198;</pre>
<pre>    local_6c = DAT_0041519c;</pre>
<pre>    local_64 = DAT_0041519c;</pre>
<pre>    local_80._0_4_ = DAT_004151a4;</pre>
<pre>    local_a0._0_4_ = DAT_004151a8;</pre>
<pre>    local_13c = DAT_004151ac;</pre>
<pre>    local_138 = DAT_004151b0;</pre>
<pre>    local_134 = DAT_004151b4;</pre>
<pre>    local_130 = DAT_004151b8;</pre>
<pre>    local_12c = DAT_004151bc;</pre>
<pre>    local_128 = DAT_004151c0;</pre>
<pre>    if (debug != 0) {</pre>
<pre>      printf("LI=%d  VN=%d  Mode=%d  Stratum=%d  Poll=%d  Precision=%d\n",local_68,local_38,local_34</pre>
<pre>             ,local_30,DAT_00415194 &gt;&gt; 8 &amp; 0xff,uVar10);</pre>
<pre>      uVar13 = __floatsidf(local_88._0_4_);</pre>
<pre>      uVar13 = __muldf3((int)((ulonglong)uVar13 &gt;&gt; 0x20),(int)uVar13,0x402e8480,0);</pre>
<pre>      local_90 = uVar13;</pre>
<pre>      uVar13 = __floatsidf(local_64);</pre>
<pre>      psVar8 = (sockaddr *)__muldf3((int)((ulonglong)uVar13 &gt;&gt; 0x20),(int)uVar13,0x402e8480,0);</pre>
<pre>      printf("Delay=%.1f  Dispersion=%.1f  Refid=%u.%u.%u.%u\n");</pre>
<pre>      printf("Reference %u.%.6u\n",local_80._0_4_,</pre>
<pre>             (local_a0._0_4_ &gt;&gt; 0xc) + ((local_a0._0_4_ &gt;&gt; 10) + 0x8000 &gt;&gt; 0x10) * -0x2f7);</pre>
<pre>      printf("(sent)    %u.%.6u\n",*param_2,</pre>
<pre>             ((uint)param_2[1] &gt;&gt; 0xc) + (((uint)param_2[1] &gt;&gt; 10) + 0x8000 &gt;&gt; 0x10) * -0x2f7);</pre>
<pre>      printf("Originate %u.%.6u\n",local_13c,</pre>
<pre>             (local_138 &gt;&gt; 0xc) + ((local_138 &gt;&gt; 10) + 0x8000 &gt;&gt; 0x10) * -0x2f7);</pre>
<pre>      printf("Receive   %u.%.6u\n",local_134,</pre>
<pre>             (local_130 &gt;&gt; 0xc) + ((local_130 &gt;&gt; 10) + 0x8000 &gt;&gt; 0x10) * -0x2f7);</pre>
<pre>      printf("Transmit  %u.%.6u\n",local_12c,</pre>
<pre>             (local_128 &gt;&gt; 0xc) + ((local_128 &gt;&gt; 10) + 0x8000 &gt;&gt; 0x10) * -0x2f7);</pre>
<pre>      printf("Our recv  %u.%.6u\n",local_144,</pre>
<pre>             (local_140 &gt;&gt; 0xc) + ((local_140 &gt;&gt; 10) + 0x8000 &gt;&gt; 0x10) * -0x2f7);</pre>
<pre>    }</pre>
<pre>    local_78._0_4_ = &amp;local_144;</pre>
<pre>    local_a0 = FUN_00400eb0(&amp;local_13c,local_78._0_4_);</pre>
<pre>    local_90._0_4_ = &amp;local_134;</pre>
<pre>    local_2c = &amp;local_12c;</pre>
<pre>    local_80 = FUN_00400eb0(local_90._0_4_,local_2c);</pre>
<pre>    local_90 = FUN_00400eb0(&amp;local_13c,local_90._0_4_);</pre>
<pre>    local_78 = FUN_00400eb0(local_2c,local_78._0_4_);</pre>
<pre>    local_124.tv_sec = 0;</pre>
<pre>    iVar4 = __adjtimex(&amp;local_124);</pre>
<pre>    psVar2 = local_11c;</pre>
<pre>    if (iVar4 &lt; 0) {</pre>
<pre>      perror("adjtimex");</pre>
<pre>                    /* WARNING: Subroutine does not return */</pre>
<pre>      exit(1);</pre>
<pre>    }</pre>
<pre>    if (debug != 0) {</pre>
<pre>      uVar13 = local_80;</pre>
<pre>      uVar14 = __subdf3(local_a0._0_4_,local_a0._4_4_,local_80._0_4_,local_80._4_4_,local_80);</pre>
<pre>      printf("Total elapsed: %9.2f\nServer stall:  %9.2f\nSlop:          %9.2f\n");</pre>
<pre>      uVar13 = __subdf3(local_90._0_4_,local_90._4_4_,local_78._0_4_,local_78._4_4_,uVar13,uVar14);</pre>
<pre>      __muldf3((int)((ulonglong)uVar13 &gt;&gt; 0x20),(int)uVar13,0x3fe00000,0);</pre>
<pre>      psVar8 = psVar2;</pre>
<pre>      printf(</pre>
<pre>            "Skew:          %9.2f\nFrequency:     %9d\n day   second     elapsed    stall     skew  dispersion  freq\n"</pre>
<pre>            );</pre>
<pre>    }</pre>
<pre>    if (param_2[7] != 0) {</pre>
<pre>      pcVar7 = local_50;</pre>
<pre>      if (local_68 != 3) {</pre>
<pre>        if ((int)local_38 &lt; 3) {</pre>
<pre>          pcVar7 = "VN&lt;3";</pre>
<pre>        }</pre>
<pre>        else {</pre>
<pre>          pcVar7 = local_3c;</pre>
<pre>          if (((((local_34 == 4) &amp;&amp; (pcVar7 = local_70, local_13c == *param_2)) &amp;&amp;</pre>
<pre>               (local_138 == param_2[1])) &amp;&amp;</pre>
<pre>              ((local_12c != 0 || (pcVar7 = local_40, local_128 != 0)))) &amp;&amp;</pre>
<pre>             ((pcVar7 = local_44, local_88._0_4_ + 0x10000 &lt; 0x20001 &amp;&amp;</pre>
<pre>              ((pcVar7 = local_48, local_6c + 0x10000 &lt; 0x20001 &amp;&amp;</pre>
<pre>               (pcVar7 = local_4c, local_30 != 0)))))) goto LAB_00401a18;</pre>
<pre>        }</pre>
<pre>      }</pre>
<pre>      printf("%d %.5d.%.3d  rejected packet: %s\n",local_144 / 0x15180,local_144 % 0x15180,</pre>
<pre>             local_140 / 0x418937,pcVar7);</pre>
<pre>      goto LAB_00401200;</pre>
<pre>    }</pre>
<pre>LAB_00401a18:</pre>
<pre>    if (param_2[3] != 0) {</pre>
<pre>      local_124.tv_sec = local_12c + 0x7c558180;</pre>
<pre>      local_124.tv_nsec =</pre>
<pre>           ((local_128 &gt;&gt; 0xc) + ((local_128 &gt;&gt; 10) + 0x8000 &gt;&gt; 0x10) * -0x2f7) * 1000;</pre>
<pre>      iVar4 = clock_settime(0,&amp;local_124);</pre>
<pre>      if (iVar4 &lt; 0) {</pre>
<pre>        perror("clock_settime");</pre>
<pre>                    /* WARNING: Subroutine does not return */</pre>
<pre>        exit(1);</pre>
<pre>      }</pre>
<pre>      if (debug != 0) {</pre>
<pre>        printf("set time to %lu.%.9lu\n",local_124.tv_sec,local_124.tv_nsec);</pre>
<pre>      }</pre>
<pre>    }</pre>
<pre>    local_78._0_4_ = (uint *)((ulonglong)local_78 &gt;&gt; 0x20);</pre>
<pre>    local_90._0_4_ = (undefined4 *)((ulonglong)local_90 &gt;&gt; 0x20);</pre>
<pre>    if (param_2[2] != 0) {</pre>
<pre>      uVar13 = __subdf3(local_90._0_4_,local_90._4_4_,local_78._0_4_,local_78._4_4_,psVar8);</pre>
<pre>      local_88 = __muldf3((int)((ulonglong)uVar13 &gt;&gt; 0x20),(int)uVar13,0x3fe00000,0);</pre>
<pre>      uVar13 = __floatsidf(local_64);</pre>
<pre>      uVar13 = __muldf3((int)((ulonglong)uVar13 &gt;&gt; 0x20),(int)uVar13,0x402e8480,0);</pre>
<pre>      __adddf3(local_a0._0_4_,local_a0._4_4_,(int)((ulonglong)uVar13 &gt;&gt; 0x20),(int)uVar13);</pre>
<pre>      psVar8 = (sockaddr *)contemplate_data(local_144);</pre>
<pre>      if ((debug == 0) &amp;&amp; (psVar8 != psVar2)) {</pre>
<pre>        FUN_00400fa8(psVar8);</pre>
<pre>      }</pre>
<pre>    }</pre>
<pre>    local_78._0_4_ = (uint *)((ulonglong)local_78 &gt;&gt; 0x20);</pre>
<pre>    local_90._0_4_ = (undefined4 *)((ulonglong)local_90 &gt;&gt; 0x20);</pre>
<pre>    local_88._0_4_ = local_144 / 0x15180;</pre>
<pre>    local_6c = local_144 % 0x15180;</pre>
<pre>    local_68 = local_140 / 0x418937;</pre>
<pre>    uVar13 = __subdf3(local_90._0_4_,local_90._4_4_,local_78._0_4_,local_78._4_4_,local_a0,local_80)</pre>
<pre>    ;</pre>
<pre>    __muldf3((int)((ulonglong)uVar13 &gt;&gt; 0x20),(int)uVar13,local_60,local_5c);</pre>
<pre>    uVar13 = __floatsidf(local_64);</pre>
<pre>    __muldf3((int)((ulonglong)uVar13 &gt;&gt; 0x20),(int)uVar13,local_58,local_54);</pre>
<pre>    printf("%d %.5d.%.3d  %8.1f %8.1f  %8.1f %8.1f %9d\n",local_88._0_4_,local_6c,local_68);</pre>
<pre>    fflush(stdout);</pre>
<pre>    uVar13 = __subdf3(local_a0._0_4_,local_a0._4_4_,local_80._0_4_,local_80._4_4_);</pre>
<pre>    iVar4 = __fixdfsi((int)((ulonglong)uVar13 &gt;&gt; 0x20),(int)uVar13);</pre>
<pre>    local_a0._0_4_ = iVar4;</pre>
<pre>    bVar1 = true;</pre>
<pre>  }</pre>
<pre>  else {</pre>
<pre>    printf("Ooops.  pack_len=%d\n",sVar6);</pre>
<pre>    fflush(stdout);</pre>
<pre>    bVar1 = false;</pre>
<pre>  }</pre>
<pre>  if (((((int)local_a0._0_4_ &lt; param_2[6]) &amp;&amp; (param_2[6] != 0)) ||</pre>
<pre>      ((local_a0 = CONCAT44(local_a0._0_4_,local_a0._4_4_), param_2[4] &lt;= iVar12 &amp;&amp;</pre>
<pre>       (local_a0 = CONCAT44(local_a0._0_4_,local_a0._4_4_), param_2[4] != 0)))) &amp;&amp;</pre>
<pre>     (param_2[3] = 0, local_a0 = CONCAT44(local_a0._0_4_,local_a0._4_4_), param_2[2] == 0)) {</pre>
<pre>LAB_00401e08:</pre>
<pre>    return !bVar1;</pre>
<pre>  }</pre>
<pre>  goto LAB_00401200;</pre>
<pre>}</pre>
<br />
  <!-- content end -->
</div>

<a href="https://github.com/e-m-b-a/emba" title="github.com/e-m-b-a/emba" target="_blank">
  <div id="buttonInfo" class="rectButtonVisible">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="40" height="40" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 21 21"><g fill="none" fill-rule="evenodd" transform="translate(2 2)"><g stroke="white" stroke-linecap="round" stroke-linejoin="round"><circle cx="8.5" cy="8.5" r="8"/><path d="M8.5 12.5v-4h-1"/><path d="M7.5 12.5h2"/></g><circle cx="8.5" cy="5.5" fill="white" r="1"/></g></svg>
  </div>
</a>
<div id="buttonBack" class="nonClickable rectButtonVisible"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="40" height="40" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 21 21"><path d="M9.5 14.5l4-4l-4-4" fill="none" stroke="#444" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
<div id="buttonForward" class="nonClickable rectButtonVisible"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="40" height="40" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 21 21"><path d="M11.5 14.5l-4-4l4-4" fill="none" stroke="#444" stroke-linecap="round" stroke-linejoin="round"/></svg></div> 
<div id="buttonDown" class="rectButton" onclick="scrollDown()"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="40" height="40" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 21 21"><g fill="none" fill-rule="evenodd" stroke="#fff" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 6.5l-4 4l-4-4"/><path d="M14.5 10.5l-4 4l-4-4"/></g></svg></div>
<div id="buttonUp" class="rectButton" onclick="scrollUp()"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="40" height="40" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 21 21"><g fill="none" fill-rule="evenodd" stroke="#fff" stroke-linecap="round" stroke-linejoin="round"><path d="M6.5 14.5l4-4l4 4"/><path d="M6.5 10.5l4-4l4 4"/></g></svg></div> 

<script>
window.onload = function () {
  var buttons = document.getElementsByClassName("rectButton");
  for (let i=0; i<buttons.length; i++) {
    buttons[i].style.visibility = "visible";
  }
  var buttonDown = document.getElementById("buttonDown");
  buttonDown.classList.add('rectButtonVisible');
  buttonDown.classList.remove('rectButton');

  var buttonUp = document.getElementById("buttonUp");
  buttonUp.classList.add('rectButtonVisible');
  buttonUp.classList.remove('rectButton');
    
  var buttonSizer = document.getElementById("buttonSizer");
  buttonSizer.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="40" height="40" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 21 21"><g fill="none" fill-rule="evenodd" stroke="white" stroke-linecap="round" stroke-linejoin="round"><path d="M9.5 16.5v-4.978l-5-.022"/><path d="M18.5 2.5l-7 7"/><path d="M16.5 9.5l-5 .023V4.5"/><path d="M9.5 11.5l-7 7"/></g></svg>';
  if (document.getElementById("buttonTime") !== null) {
    var buttonTime = document.getElementById("buttonTime");
    buttonTime.style.bottom = "50px";
  }
  document.getElementById("expand").value = "+ Show more results";
  document.getElementById("expand").className += " expand";
  var embarkButton = document.getElementById("embark");
  if ( !(embarkButton.href.includes("embarkBackUrl")) ) {
    embarkButton.classList.remove('hidden');
    document.getElementById("logoImage").src = "./../../style/embark.svg";
    document.getElementById("logo").style.background = "#2d2d2d";
  }
}

function openNav() {
  document.getElementById("sidenav").style.width = "250px";
  document.getElementById("main").style.marginLeft = "250px";
  document.getElementById("nav").style.visibility = "visible";
}

function closeNav() {
  document.getElementById("sidenav").style.width = "50px";
  document.getElementById("sidenav").scrollTop = 0;
  document.getElementById("main").style.marginLeft = "50px";
  document.getElementById("nav").style.visibility = "hidden";
}

function scrollDown() {
  window.scrollTo(0,document.body.scrollHeight);
}

function scrollUp() {
  window.scrollTo(0,0);
}

function buttonNav() {
  var button = document.getElementById("buttonSizer");
  if ( button.classList.contains('buttonOpen') ) {
    button.classList.remove('buttonOpen');
    button.classList.add('buttonClose');
    button.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="40" height="40" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 21 21"><g fill="none" fill-rule="evenodd" stroke="white" stroke-linecap="round" stroke-linejoin="round"><path d="M9.5 16.5v-4.978l-5-.022"/><path d="M18.5 2.5l-7 7"/><path d="M16.5 9.5l-5 .023V4.5"/><path d="M9.5 11.5l-7 7"/></g></svg>';
    openNav();
  } else if( button.classList.contains('buttonClose') ) {
    button.classList.remove('buttonClose');
    button.classList.add('buttonOpen');
    button.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="40" height="40" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 21 21"><g fill="none" fill-rule="evenodd" stroke="white" stroke-linecap="round" stroke-linejoin="round"><path d="M18.5 7.5v-5h-5"/><path d="M18.5 2.5l-6 5.929"/><path d="M7.5 18.5l-5 .023V13.5"/><path d="M8.5 12.5l-6 6"/></g></svg>';
    closeNav();
  };
}

// the following function is currently not used
// it is for future extensions
function overlay_output(link) {
  var rawfile = new XMLHttpRequest();
  rawfile.open('GET', link, false);
  rawfile.overrideMimeType("text");
  rawfile.onreadystatechange = function()
  {
    alert(rawfile.responseText);
    //console.log(rawfile.responseText);
  }
  rawfile.send(null);
}

document.onkeydown = function(e) {
    switch (e.keyCode) {
      case 37:
        document.getElementById("buttonForward").parentNode.click(); 
        break;
      case 39:
        document.getElementById("buttonBack").parentNode.click();       
        break;
    }
};
</script>

</body>
</html>
