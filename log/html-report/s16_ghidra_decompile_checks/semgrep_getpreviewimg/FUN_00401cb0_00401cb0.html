<!-- 
EMBA - EMBEDDED LINUX ANALYZER

Copyright 2020-2023 Siemens AG
Copyright 2020-2024 Siemens Energy AG

EMBA comes with ABSOLUTELY NO WARRANTY. This is free software, and you are
welcome to redistribute it under the terms of the GNU General Public License.
See LICENSE file for usage of this software.

EMBA is licensed under GPLv3

Author(s) and contributors from the EMBA project are listed here: https://github.com/e-m-b-a/emba/blob/master/CONTRIBUTORS.md
-->

<!-- Used icons: https://github.com/CoreyGinnivan/system-uicons -->
 
<!DOCTYPE html>
<html lang="en">
<head>
  <title>EMBA firmware report</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./../../style/style.css" type="text/css">
  <link rel="icon" type="image/png" href="./../../style/favicon.png">
</head>
<body>

<div id="sidenav" class="side">
  <div id="logo">
    <a class="inherit" href="./../../index.html"><img class="inherit" id="logoImage" src="./../../style/emba.svg" alt="logo"></a>
  </div>
  <div id="nav">
      <a id="embark" class="hidden" href="{{ embarkBackUrl }}">&laquo; Back to EMBArk</a> <!-- nosem -->
      <a class="backButton" href="./../../index.html">&laquo; Back to main</a>
<a class="modul" href="./../semgrep_getpreviewimg.html" title="./../semgrep_getpreviewimg.html" >&laquo; Back to semgrep_getpreviewimg</a>
      <!-- navigation start -->
      <!-- navigation end -->
      <input id="expand" class="expand_njs hidden" type="button" value="More results:" onclick="this.value=this.value=='+ Show more results'?'- Hide more results':'+ Show more results';">
      <div class="expand_area">
        <!-- etc start -->
        <!-- etc end -->
      </div>
  </div>
  <a href="TIMELINK"><div id="buttonTimeInvisible" class="rectButton"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="40" height="40" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 21 21"><g fill="none" fill-rule="evenodd" stroke="white" stroke-linecap="round" stroke-linejoin="round" transform="matrix(-1 0 0 1 19 2)"><circle cx="8.5" cy="8.5" r="8"/><path d="M8.5 5.5v4H5"/></g></svg></div></a>
  <div id="buttonSizer" class="rectButton buttonClose" onclick="buttonNav()"></div>
</div>
<div id="main" class="main">
  <!-- content start -->
<br />
<pre>undefined4 FUN_00401cb0(char *param_1,char *param_2)</pre>
<br />
<pre>{</pre>
<pre>  uint *puVar1;</pre>
<pre>  void **__ptr;</pre>
<pre>  void *pvVar2;</pre>
<pre>  int *piVar3;</pre>
<pre>  undefined **ppuVar4;</pre>
<pre>  undefined4 uVar5;</pre>
<pre>  int iVar6;</pre>
<pre>  uint uVar7;</pre>
<pre>  int iVar8;</pre>
<pre>  uint uVar9;</pre>
<pre>  int iVar10;</pre>
<pre>  int *piVar11;</pre>
<pre>  int *piVar12;</pre>
<pre>  void *__src;</pre>
<pre>  undefined *puVar13;</pre>
<pre>  size_t __n;</pre>
<pre>  undefined4 local_500 [11];</pre>
<pre>  undefined4 local_4d4;</pre>
<pre>  undefined4 local_4bc;</pre>
<pre>  undefined4 local_4b4;</pre>
<pre>  uint local_490;</pre>
<pre>  undefined **local_48c;</pre>
<pre>  int local_3c8;</pre>
<pre>  int local_330;</pre>
<pre>  code **local_32c;</pre>
<pre>  undefined4 local_314;</pre>
<pre>  uint local_310;</pre>
<pre>  undefined4 local_30c;</pre>
<pre>  undefined4 local_308;</pre>
<pre>  undefined4 local_2f0;</pre>
<pre>  int local_2ec;</pre>
<pre>  undefined4 local_280;</pre>
<pre>  uint local_250;</pre>
<pre>  int local_244;</pre>
<pre>  undefined auStack_1b8 [132];</pre>
<pre>  undefined auStack_134 [132];</pre>
<pre>  undefined *local_b0;</pre>
<pre>  int *local_ac;</pre>
<pre>  int *local_a8;</pre>
<pre>  int local_a4 [9];</pre>
<pre>  void *local_80;</pre>
<pre>  void *local_7c;</pre>
<pre>  void *local_78;</pre>
<pre>  uint local_70;</pre>
<pre>  undefined **local_6c;</pre>
<pre>  int *local_68;</pre>
<pre>  int *local_64;</pre>
<pre>  undefined **local_60;</pre>
<pre>  FILE *local_5c;</pre>
<pre>  uint *local_58;</pre>
<pre>  int local_54;</pre>
<pre>  undefined *local_50;</pre>
<pre>  int *local_4c;</pre>
<pre>  void *local_48;</pre>
<pre>  int *local_44;</pre>
<pre>  void *local_40;</pre>
<pre>  void **local_3c;</pre>
<pre>  uint *local_38;</pre>
<pre>  FILE *local_34;</pre>
<pre>  void *local_30;</pre>
<pre>  undefined4 *local_2c;</pre>
<pre>  </pre>
<pre><span class="green">  local_34 = fopen(param_1,"rb")</span></span></pre>
<pre>  if (local_34 == (FILE *)0x0) {</pre>
<pre>    printf("getpreviewing: Error opening jpeg file %s\n!",param_1);</pre>
<pre>  }</pre>
<pre>  else {</pre>
<pre>    local_500[0] = jpeg_std_error(auStack_1b8);</pre>
<pre>    jpeg_CreateDecompress(local_500,0x3e,0x1d0);</pre>
<pre>    jpeg_stdio_src(local_500,local_34);</pre>
<pre>    jpeg_read_header(local_500,1);</pre>
<pre>    local_4d4 = 3;</pre>
<pre>    local_4bc = 1;</pre>
<pre>    local_4b4 = 0;</pre>
<pre>    jpeg_start_decompress(local_500);</pre>
<pre>    local_6c = (undefined **)(local_3c8 &lt;&lt; 3);</pre>
<pre><span class="green">    puVar1 = (uint *)malloc((int)local_48c &lt;&lt; 2)</span></span></pre>
<pre>    local_38 = puVar1;</pre>
<pre><span class="green">    __ptr = (void **)malloc(local_490 &lt;&lt; 2)</span></span></pre>
<pre><span class="green"><span class="green"><span class="green">    pvVar2 = malloc(0x500)</span></span></span></span></pre>
<pre><span class="green"><span class="green"><span class="green">    piVar3 = (int *)malloc(0x500)</span></span></span></span></pre>
<pre>    local_60 = local_6c;</pre>
<pre><span class="green"><span class="green"><span class="green">    local_30 = malloc(local_490 * 3 * (int)local_6c)</span></span></span></span></pre>
<pre>    local_54 = local_3c8 * 0x20;</pre>
<pre><span class="green"><span class="green"><span class="green">    local_48 = malloc((int)local_6c * 0x10 + local_3c8 * -0x20)</span></span></span></span></pre>
<pre><span class="green"><span class="green"><span class="green">    local_50 = (undefined *)malloc(0x38400)</span></span></span></span></pre>
<pre>    local_80 = local_48;</pre>
<pre>    local_7c = (void *)((int)local_48 + local_54);</pre>
<pre>    local_78 = (void *)((int)local_48 + local_3c8 * 0x40);</pre>
<pre>    if (0 &lt; (int)local_6c) {</pre>
<pre>      iVar8 = (int)local_60 &lt;&lt; 1;</pre>
<pre>      ppuVar4 = (undefined **)0x0;</pre>
<pre>      do {</pre>
<pre>        iVar6 = (int)ppuVar4 * 4;</pre>
<pre>        *(void **)((int)local_48 + iVar6) = (void *)((int)local_30 + (int)ppuVar4 * local_490);</pre>
<pre>        *(void **)((int)local_7c + iVar6) =</pre>
<pre>             (void *)((int)local_30 + ((int)ppuVar4 + (int)local_60) * local_490);</pre>
<pre>        *(void **)((int)local_78 + iVar6) = (void *)((int)local_30 + iVar8 * local_490);</pre>
<pre>        ppuVar4 = (undefined **)((int)ppuVar4 + 1);</pre>
<pre>        iVar8 = iVar8 + 1;</pre>
<pre>      } while (ppuVar4 != local_6c);</pre>
<pre>    }</pre>
<pre>    *__ptr = (void *)0x0;</pre>
<pre>    *local_38 = 0;</pre>
<pre>    uVar7 = 0xf0;</pre>
<pre>    if ((undefined **)0x1 &lt; local_48c) {</pre>
<pre>      ppuVar4 = (undefined **)0x1;</pre>
<pre>      do {</pre>
<pre>        if (local_48c == (undefined **)0x0) {</pre>
<pre>          trap(0x1c00);</pre>
<pre>        }</pre>
<pre>        if (local_38[(int)ppuVar4 - 1] == uVar7 / (uint)local_48c) {</pre>
<pre>          local_38[(int)ppuVar4 - 1] = 0xffffffff;</pre>
<pre>        }</pre>
<pre>        local_38[(int)ppuVar4] = uVar7 / (uint)local_48c;</pre>
<pre>        ppuVar4 = (undefined **)((int)ppuVar4 + 1);</pre>
<pre>        uVar7 = uVar7 + 0xf0;</pre>
<pre>      } while (ppuVar4 &lt; local_48c);</pre>
<pre>    }</pre>
<pre>    uVar7 = 0x140;</pre>
<pre>    if (1 &lt; local_490) {</pre>
<pre>      uVar9 = 1;</pre>
<pre>      do {</pre>
<pre>        if (local_490 == 0) {</pre>
<pre>          trap(0x1c00);</pre>
<pre>        }</pre>
<pre>        if (__ptr[uVar9 - 1] == (void *)(uVar7 / local_490)) {</pre>
<pre>          __ptr[uVar9 - 1] = (void *)0xffffffff;</pre>
<pre>        }</pre>
<pre>        __ptr[uVar9] = (void *)(uVar7 / local_490);</pre>
<pre>        uVar9 = uVar9 + 1;</pre>
<pre>        uVar7 = uVar7 + 0x140;</pre>
<pre>      } while (uVar9 &lt; local_490);</pre>
<pre>    }</pre>
<pre>    local_44 = (int *)(local_50 + 0x12c00);</pre>
<pre>    local_4c = (int *)(local_50 + 96000);</pre>
<pre><span class="green">    memset(pvVar2,0,0x500)</span></span></pre>
<pre><span class="green">    memset(piVar3,0,0x500)</span></span></pre>
<pre>    if (local_48c != (undefined **)0x0) {</pre>
<pre>      local_5c = (FILE *)local_60;</pre>
<pre>      local_68 = local_4c;</pre>
<pre>      local_64 = local_44;</pre>
<pre>      local_3c = &amp;local_80;</pre>
<pre>      local_2c = local_500;</pre>
<pre>      local_70 = 0;</pre>
<pre>      puVar13 = local_50;</pre>
<pre>      ppuVar4 = (undefined **)local_5c;</pre>
<pre>      local_58 = puVar1;</pre>
<pre>      do {</pre>
<pre>        local_5c = (FILE *)ppuVar4;</pre>
<pre>        jpeg_read_raw_data(local_2c,local_3c,local_60);</pre>
<pre>        if (0 &lt; (int)local_6c) {</pre>
<pre>          iVar8 = 0;</pre>
<pre>          puVar1 = local_58;</pre>
<pre>          do {</pre>
<pre>            if (-1 &lt; (int)*puVar1) {</pre>
<pre>              if (local_490 != 0) {</pre>
<pre>                iVar6 = (iVar8 / 2) * 4;</pre>
<pre>                uVar7 = local_70;</pre>
<pre>                do {</pre>
<pre>                  if (-1 &lt; (int)__ptr[uVar7]) {</pre>
<pre>                    *puVar13 = *(undefined *)(*(int *)((int)local_80 + iVar8 * 4) + uVar7);</pre>
<pre>                    puVar13 = puVar13 + 1;</pre>
<pre>                    iVar10 = (int)__ptr[uVar7] / 2;</pre>
<pre>                    piVar11 = (int *)((int)pvVar2 + iVar10 * 4);</pre>
<pre>                    *piVar11 = *piVar11 +</pre>
<pre>                               (uint)*(byte *)(*(int *)((int)local_7c + iVar6) + (int)uVar7 / 2);</pre>
<pre>                    piVar3[iVar10] =</pre>
<pre>                         piVar3[iVar10] +</pre>
<pre>                         (uint)*(byte *)(*(int *)((int)local_78 + iVar6) + (int)uVar7 / 2);</pre>
<pre>                  }</pre>
<pre>                  uVar7 = uVar7 + 1;</pre>
<pre>                } while (uVar7 &lt; local_490);</pre>
<pre>              }</pre>
<pre>              uVar7 = local_70;</pre>
<pre>              piVar11 = local_64;</pre>
<pre>              piVar12 = local_68;</pre>
<pre>              if ((*puVar1 &amp; 1) != 0) {</pre>
<pre>                do {</pre>
<pre>                  iVar6 = *(int *)((int)pvVar2 + uVar7);</pre>
<pre>                  if (iVar6 &lt; 0) {</pre>
<pre>                    iVar6 = iVar6 + 3;</pre>
<pre>                  }</pre>
<pre>                  *(char *)piVar11 = (char)(iVar6 &gt;&gt; 2);</pre>
<pre>                  iVar6 = *(int *)((int)piVar3 + uVar7);</pre>
<pre>                  if (iVar6 &lt; 0) {</pre>
<pre>                    iVar6 = iVar6 + 3;</pre>
<pre>                  }</pre>
<pre>                  *(char *)piVar12 = (char)(iVar6 &gt;&gt; 2);</pre>
<pre>                  uVar7 = uVar7 + 4;</pre>
<pre>                  piVar11 = (int *)((int)piVar11 + 1);</pre>
<pre>                  piVar12 = (int *)((int)piVar12 + 1);</pre>
<pre>                } while (uVar7 != 0x280);</pre>
<pre>                local_64 = local_64 + 0x28;</pre>
<pre>                local_68 = local_68 + 0x28;</pre>
<pre><span class="green">                memset(pvVar2,local_70,0x500)</span></span></pre>
<pre><span class="green">                memset(piVar3,local_70,0x500)</span></span></pre>
<pre>              }</pre>
<pre>            }</pre>
<pre>            iVar8 = iVar8 + 1;</pre>
<pre>            puVar1 = puVar1 + 1;</pre>
<pre>          } while (iVar8 &lt; (int)local_6c);</pre>
<pre>        }</pre>
<pre>        local_58 = (uint *)((int)local_58 + local_54);</pre>
<pre>        ppuVar4 = (undefined **)((int)local_60 + (int)local_5c);</pre>
<pre>      } while (local_5c &lt; local_48c);</pre>
<pre>    }</pre>
<pre>    local_330 = jpeg_std_error(auStack_134);</pre>
<pre>    jpeg_CreateCompress(&amp;local_330,0x3e,0x178);</pre>
<pre><span class="green">    local_5c = fopen(param_2,"wb")</span></span></pre>
<pre>    if (local_5c != (FILE *)0x0) {</pre>
<pre>      jpeg_stdio_dest(&amp;local_330,local_5c);</pre>
<pre>      local_314 = 0x140;</pre>
<pre>      local_310 = 0xf0;</pre>
<pre>      local_30c = 3;</pre>
<pre>      local_308 = 2;</pre>
<pre>      jpeg_set_defaults(&amp;local_330);</pre>
<pre>      jpeg_set_quality(&amp;local_330,0x3c,1);</pre>
<pre>      local_280 = 1;</pre>
<pre>      local_2f0 = 3;</pre>
<pre>      *(undefined4 *)(local_2ec + 8) = 2;</pre>
<pre>      *(undefined4 *)(local_2ec + 0xc) = 2;</pre>
<pre>      jpeg_start_compress(&amp;local_330,1);</pre>
<pre>      local_70 = (**local_32c)(&amp;local_330,1,0xc);</pre>
<pre>      iVar8 = 0;</pre>
<pre>      iVar6 = 0;</pre>
<pre>      local_54 = local_70;</pre>
<pre>      do {</pre>
<pre>        *(int *)((int)local_a4 + iVar8) = *(int *)(local_2ec + iVar6 + 0x1c) &lt;&lt; 3;</pre>
<pre>        *(int *)((int)local_a4 + iVar8 + 0xc) = *(int *)(local_2ec + iVar6 + 0xc) &lt;&lt; 3;</pre>
<pre>        uVar5 = (*local_32c[2])(&amp;local_330,1);</pre>
<pre>        *(undefined4 *)(local_70 + iVar8) = uVar5;</pre>
<pre>        iVar6 = iVar6 + 0x54;</pre>
<pre>        iVar8 = iVar8 + 4;</pre>
<pre>      } while (iVar6 != 0xfc);</pre>
<pre>      local_b0 = local_50;</pre>
<pre>      local_ac = local_44;</pre>
<pre>      local_a8 = local_4c;</pre>
<pre>      piVar11 = local_a4 + 6;</pre>
<pre>      iVar8 = 1;</pre>
<pre>      do {</pre>
<pre>        if (iVar8 == 1) {</pre>
<pre>          *piVar11 = 0x140;</pre>
<pre>        }</pre>
<pre>        else {</pre>
<pre>          *piVar11 = 0xa0;</pre>
<pre>          if (2 &lt; iVar8) {</pre>
<pre>            local_58 = (uint *)(local_244 &lt;&lt; 3);</pre>
<pre>            iVar8 = 0;</pre>
<pre>            if (local_250 &lt; local_310) {</pre>
<pre>              local_6c = &amp;local_b0;</pre>
<pre>              local_68 = local_a4 + 3;</pre>
<pre>              local_64 = local_a4;</pre>
<pre>              local_60 = (undefined **)0x0;</pre>
<pre>              local_4c = &amp;local_330;</pre>
<pre>              local_44 = piVar3;</pre>
<pre>              local_40 = pvVar2;</pre>
<pre>              local_3c = __ptr;</pre>
<pre>              do {</pre>
<pre>                iVar6 = 0;</pre>
<pre>                do {</pre>
<pre>                  pvVar2 = **(void ***)(local_70 + iVar6);</pre>
<pre>                  iVar10 = *(int *)((int)local_68 + iVar6);</pre>
<pre><span class="green">                  __n = *(size_t *)((int)local_a4 + iVar6 + 0x18)</span></span></pre>
<pre>                  if (0 &lt; iVar10) {</pre>
<pre>                    __src = (void *)(*(int *)((int)local_6c + iVar6) + __n * iVar10 * iVar8);</pre>
<pre>                    piVar3 = (int *)((int)local_64 + iVar6);</pre>
<pre>                    ppuVar4 = local_60;</pre>
<pre>                    do {</pre>
<pre><span class="green">                      memcpy(pvVar2,__src,__n)</span></span></pre>
<pre>                      pvVar2 = (void *)((int)pvVar2 + *piVar3);</pre>
<pre>                      ppuVar4 = (undefined **)((int)ppuVar4 + 1);</pre>
<pre>                      __src = (void *)((int)__src + __n);</pre>
<pre>                    } while ((int)ppuVar4 &lt; iVar10);</pre>
<pre>                  }</pre>
<pre>                  iVar6 = iVar6 + 4;</pre>
<pre>                } while (iVar6 != 0xc);</pre>
<pre>                jpeg_write_raw_data(local_4c,local_54,local_58);</pre>
<pre>                iVar8 = iVar8 + 1;</pre>
<pre>                __ptr = local_3c;</pre>
<pre>                pvVar2 = local_40;</pre>
<pre>                piVar3 = local_44;</pre>
<pre>              } while (local_250 &lt; local_310);</pre>
<pre>            }</pre>
<pre>            free(pvVar2);</pre>
<pre>            free(piVar3);</pre>
<pre>            free(local_38);</pre>
<pre>            free(__ptr);</pre>
<pre>            free(local_30);</pre>
<pre>            free(local_48);</pre>
<pre>            free(local_50);</pre>
<pre>            jpeg_finish_decompress(local_500);</pre>
<pre>            jpeg_destroy_decompress(local_500);</pre>
<pre>            fclose(local_34);</pre>
<pre>            jpeg_finish_compress(&amp;local_330);</pre>
<pre>            jpeg_destroy_compress(&amp;local_330);</pre>
<pre>            fclose(local_5c);</pre>
<pre>            return 1;</pre>
<pre>          }</pre>
<pre>        }</pre>
<pre>        iVar8 = iVar8 + 1;</pre>
<pre>        piVar11 = piVar11 + 1;</pre>
<pre>      } while( true );</pre>
<pre>    }</pre>
<pre>    printf("getpreviewimg: Error opening file %s\n",param_2);</pre>
<pre>  }</pre>
<pre>  return 0xffffffff;</pre>
<pre>}</pre>
<br />
  <!-- content end -->
</div>

<a href="https://github.com/e-m-b-a/emba" title="github.com/e-m-b-a/emba" target="_blank">
  <div id="buttonInfo" class="rectButtonVisible">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="40" height="40" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 21 21"><g fill="none" fill-rule="evenodd" transform="translate(2 2)"><g stroke="white" stroke-linecap="round" stroke-linejoin="round"><circle cx="8.5" cy="8.5" r="8"/><path d="M8.5 12.5v-4h-1"/><path d="M7.5 12.5h2"/></g><circle cx="8.5" cy="5.5" fill="white" r="1"/></g></svg>
  </div>
</a>
<div id="buttonBack" class="nonClickable rectButtonVisible"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="40" height="40" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 21 21"><path d="M9.5 14.5l4-4l-4-4" fill="none" stroke="#444" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
<div id="buttonForward" class="nonClickable rectButtonVisible"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="40" height="40" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 21 21"><path d="M11.5 14.5l-4-4l4-4" fill="none" stroke="#444" stroke-linecap="round" stroke-linejoin="round"/></svg></div> 
<div id="buttonDown" class="rectButton" onclick="scrollDown()"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="40" height="40" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 21 21"><g fill="none" fill-rule="evenodd" stroke="#fff" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 6.5l-4 4l-4-4"/><path d="M14.5 10.5l-4 4l-4-4"/></g></svg></div>
<div id="buttonUp" class="rectButton" onclick="scrollUp()"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="40" height="40" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 21 21"><g fill="none" fill-rule="evenodd" stroke="#fff" stroke-linecap="round" stroke-linejoin="round"><path d="M6.5 14.5l4-4l4 4"/><path d="M6.5 10.5l4-4l4 4"/></g></svg></div> 

<script>
window.onload = function () {
  var buttons = document.getElementsByClassName("rectButton");
  for (let i=0; i<buttons.length; i++) {
    buttons[i].style.visibility = "visible";
  }
  var buttonDown = document.getElementById("buttonDown");
  buttonDown.classList.add('rectButtonVisible');
  buttonDown.classList.remove('rectButton');

  var buttonUp = document.getElementById("buttonUp");
  buttonUp.classList.add('rectButtonVisible');
  buttonUp.classList.remove('rectButton');
    
  var buttonSizer = document.getElementById("buttonSizer");
  buttonSizer.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="40" height="40" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 21 21"><g fill="none" fill-rule="evenodd" stroke="white" stroke-linecap="round" stroke-linejoin="round"><path d="M9.5 16.5v-4.978l-5-.022"/><path d="M18.5 2.5l-7 7"/><path d="M16.5 9.5l-5 .023V4.5"/><path d="M9.5 11.5l-7 7"/></g></svg>';
  if (document.getElementById("buttonTime") !== null) {
    var buttonTime = document.getElementById("buttonTime");
    buttonTime.style.bottom = "50px";
  }
  document.getElementById("expand").value = "+ Show more results";
  document.getElementById("expand").className += " expand";
  var embarkButton = document.getElementById("embark");
  if ( !(embarkButton.href.includes("embarkBackUrl")) ) {
    embarkButton.classList.remove('hidden');
    document.getElementById("logoImage").src = "./../../style/embark.svg";
    document.getElementById("logo").style.background = "#2d2d2d";
  }
}

function openNav() {
  document.getElementById("sidenav").style.width = "250px";
  document.getElementById("main").style.marginLeft = "250px";
  document.getElementById("nav").style.visibility = "visible";
}

function closeNav() {
  document.getElementById("sidenav").style.width = "50px";
  document.getElementById("sidenav").scrollTop = 0;
  document.getElementById("main").style.marginLeft = "50px";
  document.getElementById("nav").style.visibility = "hidden";
}

function scrollDown() {
  window.scrollTo(0,document.body.scrollHeight);
}

function scrollUp() {
  window.scrollTo(0,0);
}

function buttonNav() {
  var button = document.getElementById("buttonSizer");
  if ( button.classList.contains('buttonOpen') ) {
    button.classList.remove('buttonOpen');
    button.classList.add('buttonClose');
    button.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="40" height="40" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 21 21"><g fill="none" fill-rule="evenodd" stroke="white" stroke-linecap="round" stroke-linejoin="round"><path d="M9.5 16.5v-4.978l-5-.022"/><path d="M18.5 2.5l-7 7"/><path d="M16.5 9.5l-5 .023V4.5"/><path d="M9.5 11.5l-7 7"/></g></svg>';
    openNav();
  } else if( button.classList.contains('buttonClose') ) {
    button.classList.remove('buttonClose');
    button.classList.add('buttonOpen');
    button.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="40" height="40" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 21 21"><g fill="none" fill-rule="evenodd" stroke="white" stroke-linecap="round" stroke-linejoin="round"><path d="M18.5 7.5v-5h-5"/><path d="M18.5 2.5l-6 5.929"/><path d="M7.5 18.5l-5 .023V13.5"/><path d="M8.5 12.5l-6 6"/></g></svg>';
    closeNav();
  };
}

// the following function is currently not used
// it is for future extensions
function overlay_output(link) {
  var rawfile = new XMLHttpRequest();
  rawfile.open('GET', link, false);
  rawfile.overrideMimeType("text");
  rawfile.onreadystatechange = function()
  {
    alert(rawfile.responseText);
    //console.log(rawfile.responseText);
  }
  rawfile.send(null);
}

document.onkeydown = function(e) {
    switch (e.keyCode) {
      case 37:
        document.getElementById("buttonForward").parentNode.click(); 
        break;
      case 39:
        document.getElementById("buttonBack").parentNode.click();       
        break;
    }
};
</script>

</body>
</html>
