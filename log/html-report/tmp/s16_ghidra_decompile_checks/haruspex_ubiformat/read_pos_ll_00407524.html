<br />
<pre>int read_pos_ll(char *file,longlong *value)</pre>
<br />
<pre>{</pre>
<pre>  FILE *pFVar1;</pre>
<pre>  int iVar2;</pre>
<pre>  ssize_t sVar3;</pre>
<pre>  int iVar4;</pre>
<pre>  int *piVar5;</pre>
<pre>  char *pcVar6;</pre>
<pre>  char buf [50];</pre>
<pre>  </pre>
<pre><span class="green">  iVar2 = open64(file,0x80000)</span></span></pre>
<pre>  if (iVar2 != -1) {</pre>
<pre><span class="green"><span class="green">    sVar3 = read(iVar2,buf,0x32)</span></span></span></pre>
<pre>    if (sVar3 == -1) {</pre>
<pre>      piVar5 = __errno_location();</pre>
<pre>      iVar4 = *piVar5;</pre>
<pre>      fprintf(stderr,"%s: error!: cannot read \"%s\"\n","libmtd",file);</pre>
<pre>      pFVar1 = stderr;</pre>
<pre>      pcVar6 = strerror(iVar4);</pre>
<pre>      fprintf(pFVar1,"%*serror %d (%s)\n",8,&amp;DAT_0040e38c,iVar4,pcVar6);</pre>
<pre>    }</pre>
<pre>    else {</pre>
<pre>      if (sVar3 == 0x32) {</pre>
<pre>        fprintf(stderr,"%s: error!: contents of \"%s\" is too long\n","libmtd",file);</pre>
<pre>      }</pre>
<pre>      else {</pre>
<pre><span class="green">        iVar4 = sscanf(buf,"%lld\n",value)</span></span></pre>
<pre>        if (iVar4 == 1) {</pre>
<pre>          if (-1 &lt; *(int *)((int)value + 4)) {</pre>
<pre>            iVar2 = close(iVar2);</pre>
<pre>            if (iVar2 == 0) {</pre>
<pre>              return 0;</pre>
<pre>            }</pre>
<pre>            piVar5 = __errno_location();</pre>
<pre>            iVar2 = *piVar5;</pre>
<pre>            fprintf(stderr,"%s: error!: close failed on \"%s\"\n","libmtd",file);</pre>
<pre>            pFVar1 = stderr;</pre>
<pre>            pcVar6 = strerror(iVar2);</pre>
<pre>            fprintf(pFVar1,"%*serror %d (%s)\n",8,&amp;DAT_0040e38c,iVar2,pcVar6);</pre>
<pre>            return -1;</pre>
<pre>          }</pre>
<pre>          fprintf(stderr,"%s: error!: negative value %lld in \"%s\"\n","libmtd");</pre>
<pre>        }</pre>
<pre>        else {</pre>
<pre>          fprintf(stderr,"%s: error!: cannot read integer from \"%s\"\n\n","libmtd",file);</pre>
<pre>        }</pre>
<pre>      }</pre>
<pre>      piVar5 = __errno_location();</pre>
<pre>      *piVar5 = 0x16;</pre>
<pre>    }</pre>
<pre>    close(iVar2);</pre>
<pre>  }</pre>
<pre>  return -1;</pre>
<pre>}</pre>
<br />
<pre>[ASK_GPT] 2e8a8409bc9c1481</pre>
