!function(s){s.su.moduleManager.define("main",{services:["moduleLoader","user","ajax","device"],stores:[],deps:[],views:["main"],listeners:{"ev_on_launch":function(o,n,i,a,e,t,l){location.hash&&location.hash.substr(1);n.syncTokenFromStorage(),s("#global-splash").css("background-size","cover");setTimeout(function(){n.hideSplash()},600);""===n.getToken()?n.loadBasicModule("login"):n.loadBasicModule("index")},"ev_login_timeout":function(){this.onLoginTimeout()},"ev_user_conflict":function(){this.onUserConflict()},"ev_permission_denied":function(){this.onPermissionDenied()}},init:function(o,n,i,a,e,t){this.control({"#global-confirm":{"ev_msg_ok":function(){o.globalConfirmSuccessCallback&&o.globalConfirmSuccessCallback.call(),o.globalConfirmSuccessCallback=null},"ev_msg_no":function(){o.globalConfirmFailCallback&&o.globalConfirmFailCallback.call(),o.globalConfirmFailCallback=null}},"#user-conflict-prompt":{"ev_msg_ok":function(){o.loadLoginPage()}}})}},function(t,l,o,n,i,a){t=this;return{LOGOUT_URL:s.su.url("/admin/system?form=logout"),loadBasicModule:function(o,n){a.moduleLoader.load({module:"main"},{module:o},l.main.basicModuleLoader,n)},splashTime:1e3,showSplash:function(){l.main.splash.show()},hideSplash:function(){l.main.splash.fadeOut(400)},showError:function(o){o&&(l.main.globalError.setContent(o),l.main.globalError.show())},startReboot:function(o,n){o=o||9e4;var i=this;l.main.rebootMsg.show(function(){l.main.rebootProgress.animate({duration:o,percentageStart:0,percentageEnd:100,callback:function(){i.checkReboot(),n&&n()}})})},checkReboot:function(){l.main.rebootMsg.hide()},showNotice:function(o,n){l.main.globalNotice.show(o,n)},hideNotice:function(o){l.main.globalNotice.hide(o)},checkLogin:function(){},setToken:function(o){localStorage.setItem("token",o),s.su.url.stok=o},getToken:function(){var o=s.su.url.stok;return o||""},syncTokenFromStorage:function(){var o=localStorage.getItem("token");s.su.url.stok=o},onLoginTimeout:function(){t.loadLoginPage()},loadLoginPage:function(){t.setToken(""),t.loadBasicModule("login")},onUserConflict:function(){l.main.userConflictMsg.show()},onPermissionDenied:function(){t.alert(s.su.CHAR.ERROR["00000088"])},reload:function(){location.reload()},showMask:function(){l.main.transparentMask.show("global-trans-mask")},hideMask:function(){l.main.transparentMask.hide("global-trans-mask")},confirm:function(o,n,i,a,e){o&&(l.main.globalConfirm.setContent(o),l.main.globalConfirm.show(),l.main.globalConfirm.setButtonText("ok",a||s.su.CHAR.OPERATION.YES_UPPERCASE),l.main.globalConfirm.setButtonText("no",e||s.su.CHAR.OPERATION.CANCEL_UPPERCASE),t.globalConfirmSuccessCallback=n||function(){},t.globalConfirmFailCallback=i||function(){})},alert:function(o){o&&(l.main.globalAlert.setContent(o),l.main.globalAlert.show())}}})}(jQuery);