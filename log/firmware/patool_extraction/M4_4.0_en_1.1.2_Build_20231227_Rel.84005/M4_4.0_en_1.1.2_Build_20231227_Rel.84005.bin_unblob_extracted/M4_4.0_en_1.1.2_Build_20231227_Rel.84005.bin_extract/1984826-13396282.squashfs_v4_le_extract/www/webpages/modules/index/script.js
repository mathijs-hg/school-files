!function(u){u.su.moduleManager.define("index",{models:["wirelessInfoModel"],services:["moduleManager","device","ajax"],stores:["languageStore","searchStore"],deps:["navigatorController","main"],views:["index"],preventSave:!0,listeners:{"ev_on_launch":function(e,a,t,n,o,i,r){var s;u.su.encryptor=u.encrypt.encryptManager.getEncryptor(),u.su.encryptor||i.main.loadLoginPage(),(s=r.device.getCurrentMode())&&(deviceMode=s.sysMode,"RE"===s.workMode&&(deviceMode="LTE"==s.sysMode||"Mobile_5G"==s.sysMode?"Mobile_RE":"RE"),u.su.isMobile()||(u.su.scrollbar({ele:".page-content"}),u.su.scrollbar({ele:"#navigator"},function(e){a.ps=e})),u("#navigator").attr("tabindex","0"),u(".page-content").attr("tabindex","1"),i.navigatorController.pcMainMenu=t.index.pcMainMenu,i.navigatorController.pcSliderNavigator=t.index.pcSliderNavigator,i.navigatorController.pageContainer=t.index.pageContainer,i.navigatorController.loadingSimpleDom=t.index.pageLoadingSd,i.navigatorController.loadNavigatorData(deviceMode,function(e){var t=i.navigatorController.indexShouldLoad||location.hash&&location.hash.substr(1)||i.navigatorController._getFirstChildrenPage(e[0].name);"networkStatus"!==t&&"networkMap"!==t&&a.updateProductName(),i.navigatorController.goTo(t),i.navigatorController.indexShouldLoad=null}))}},init:function(n,o,e,t,i,a){this.control({"#main-menu":{"ev_navigator_clicked":function(e,t){if("logout"==t)return o.index.logoutConfirmMsg.show(),void n.setMobileMenuStatus("close");var a=i.navigatorController.mainMenuClicked(t,"s"==u.su.widgetSize);a&&a.children&&0<a.children.length&&"s"==u.su.widgetSize?n.setMobileMenuStatus("level2",a.text):n.setMobileMenuStatus("close")}},"#navigator":{"ev_navigator_clicked":function(e,t){var a=i.navigatorController.pcNavigatorClicked(t);a&&a.children&&0!=a.children.length||n.setMobileMenuStatus("close")},"ev_navigator_loaded":function(e,t){0===t.length?u(".page").addClass("no-navigator"):u(".page").removeClass("no-navigator"),setTimeout(function(){u.su.isMobile()||(n.ps?n.ps.update():u.su.scrollbar({ele:"#navigator"},function(e){n.ps=e,n.ps.update()}))},200)},"ev_navigator_opened":function(e){setTimeout(function(){u.su.isMobile()||(n.ps?n.ps.update():u.su.scrollbar({ele:"#navigator"},function(e){n.ps=e,n.ps.update()}))},200)}},".index-common-save-btn":{"ev_button_click":function(e){var t=this,a=u.su.getDefaultEvent(this,function(){t.submitDirtyData()});u(e.target).trigger("ev_will_auto_save",[a.ev]),a.exe()}},"#back-to-top":{"ev_button_click":function(){u(".page-content").animate({scrollTop:"0px"},200)}},"#menu-button":{"click":function(){var e=n.menuBtn().status();"close"==e||e===undefined?n.setMobileMenuStatus("level1"):"level2"==e?n.setMobileMenuStatus("level1"):n.setMobileMenuStatus("close")}},"#search-button":{"ev_button_click":function(){i.navigatorController.goTo("search")}},"#logout-button":{"ev_button_click":function(){o.index.logoutConfirmMsg.show()}},".logout-confirm-msg":{"ev_msg_ok":function(){n.logout()}}}),this.listen()}},function(r,s,t,e,a,n){var o=function(e,t){return u.inArray(e,t)};return{"LOGOUT_URL":u.su.url("/admin/system?form=logout"),"logout":function(){n.ajax.request({url:r.LOGOUT_URL,data:{operation:"logout"},success:function(){a.main.loadLoginPage()},fail:function(){a.main.loadLoginPage()},error:function(){a.main.loadLoginPage()}})},"showError":function(e){},"mobileTopBar":s.index.mobileTopBar,"menuBtn":function(){return s.index.mobileTopBar.leftBtn()},"funcBtn":function(){return s.index.mobileTopBar.rightBtn()},"setMobileMenuStatus":function(e,t){var a=r.mobileTopBar,n=r.menuBtn(),o=r.funcBtn(),i=n.status();switch(e){case"level1":a.setCenterText(""),a.addClass("menu-open"),n.status("level1"),o.addClass("s-hide"),s.index.pcSliderNavigator.addClass("s-hide"),s.index.pcMainMenu.removeClass("s-hide"),"close"!=i&&i!=undefined||(s.index.pcMainMenu.addClass("menu-open"),setTimeout(function(){s.index.pcMainMenu.removeClass("menu-open")},300));break;case"level2":a.setCenterText(t),a.addClass("menu-open"),n.status("level2"),o.addClass("s-hide"),s.index.pcMainMenu.addClass("s-hide"),s.index.pcSliderNavigator.removeClass("s-hide");break;case"close":default:"level1"==i?(s.index.pcMainMenu.addClass("menu-close"),setTimeout(function(){s.index.pcMainMenu.removeClass("menu-close"),s.index.pcMainMenu.addClass("s-hide"),a.setCenterText(""),a.removeClass("menu-open"),n.status("close"),o.removeClass("s-hide")},300)):"level2"==i?(s.index.pcSliderNavigator.addClass("menu-close"),setTimeout(function(){s.index.pcSliderNavigator.removeClass("menu-close"),s.index.pcSliderNavigator.addClass("s-hide"),a.setCenterText(""),a.removeClass("menu-open"),n.status("close"),o.removeClass("s-hide")},300)):(s.index.pcSliderNavigator.addClass("s-hide"),s.index.pcSliderNavigator.addClass("s-hide"),a.setCenterText(""),a.removeClass("menu-open"),n.status("close"),o.removeClass("s-hide"))}},"_toSaveArr":[],"_dataCheckDirtyTimeout":{},"_dataAutoSaveHock":function(e){var t=o(this,r._toSaveArr);this.isDirty()?t<0&&r._toSaveArr.push(this):0<=t&&r._toSaveArr.splice(t,1),r.updateSaveBtnDisplayStatus()},"_toSaveLoadingArr":[],"_dataSaveLoadingHook":function(e,t){var a=o(this,r._toSaveLoadingArr),n=0<=o(this,r._toSaveArr);t===undefined&&n?a<0&&r._toSaveLoadingArr.push(this):0<=a&&r._toSaveLoadingArr.splice(a,1),r.updateSaveBtnLoadingStatus()},"submitDirtyData":function(e){u.each(this._toSaveArr,function(e,t){var a=u.su.getDefaultEvent(t,function(){t.submit?t.submit():t.sync()});t.trigger("ev_will_auto_save",[a.ev]),a.exe()})},"registerAutoSaveData":function(e){e.on("ev_data_change",r._dataAutoSaveHock),e.on("ev_loaded",r._dataAutoSaveHock),e.on("ev_model_submit",r._dataAutoSaveHock)},"unRegisterAutoSaveData":function(e){e.off("ev_data_change",r._dataAutoSaveHock),e.off("ev_loaded",r._dataAutoSaveHock),e.off("ev_model_submit",r._dataAutoSaveHock);var t=o(e,r._toSaveArr);0<=t&&r._toSaveArr.splice(t,1),r.updateSaveBtnDisplayStatus()},"updateSaveBtnDisplayStatus":u.su.debounce(function(){0==r._toSaveArr.length&&u.isEmptyObject(r._saveBtnManualShowHideMap)?(r.hideSaveBtn(),r.hideLoadingSaveBtn()):r.showSaveBtn()},0),registerSaveLoading:function(e){e.on("ev_model_before_submit",r._dataSaveLoadingHook),e.on("ev_model_submit_complete",r._dataSaveLoadingHook),e.on("ev_store_before_sync",r._dataSaveLoadingHook),e.on("ev_store_sync_complete",r._dataSaveLoadingHook)},unRegisterSaveLoading:function(e){e.off("ev_model_before_submit",r._dataSaveLoadingHook),e.off("ev_model_submit_complete",r._dataSaveLoadingHook),e.off("ev_store_before_sync",r._dataSaveLoadingHook),e.off("ev_store_sync_complete",r._dataSaveLoadingHook);var t=o(e,r._toSaveLoadingArr);0<=t&&r._toSaveLoadingArr.splice(t,1),r.updateSaveBtnLoadingStatus()},updateSaveBtnLoadingStatus:u.su.debounce(function(){0===r._toSaveLoadingArr.length?r.hideLoadingSaveBtn():r.showLoadingSaveBtn()},0),hideSaveBtn:function(){s.index.saveButton.hide(),u(".index-common-save-btn").hide()},showSaveBtn:function(){s.index.saveButton.show(),u(".index-common-save-btn").show()},disableSaveBtn:function(){s.index.saveButton.disable()},enableSaveBtn:function(){s.index.saveButton.enable()},showLoadingSaveBtn:function(){s.index.saveButton.loading(!0)},hideLoadingSaveBtn:function(){s.index.saveButton.loading(!1)},_saveBtnManualShowHideMap:{},alwaysShowSaveBtn:function(e){r._saveBtnManualShowHideMap[e]=!0,s.index.saveButton.show()},cancelAlwaysShowSaveBtn:function(e){delete r._saveBtnManualShowHideMap[e],r.updateSaveBtnDisplayStatus()},showLoading:function(){a.main.showMask(),s.index.pageLoadingSd.show()},hideLoading:function(){a.main.hideMask(),s.index.pageLoadingSd.hide()},updateProductName:function(){var e;n.device.deviceName=t.wirelessInfoModel.ssid2_4.getValue(),n.device.isTriband=t.wirelessInfoModel.isTriband.getValue(),e=n.device.getProductName(),document.title=e,s.index.productName.setValue(e)}}})}(jQuery),$.su.storeManager.define("searchStore",{type:"store",fields:[{name:"name"},{name:"text"}],data:[]}),function(l){l.su.moduleManager.define("navigatorController",{services:["moduleLoader","moduleManager","ajax"],stores:[],views:[],deps:["main"],listeners:{},init:function(t,e,a,n,o,i){l(window).off("hashchange").on("hashchange",function(){var e=location.hash&&location.hash.substr(1);t.currentPage!=e&&t.goTo(e)})}},function(n,e,t,a,o,i){var r,s,u;return{navigatorUrl:{Router:"./config/navigator.json",AP:"./config/navigator.ap.json",RE:"./config/navigator.re.json",Mobile_RE:"./config/navigator.mobile_re.json",LTE:"./config/navigator.mobile.json",Mobile_5G:"./config/navigator.mobile.json"},currentMode:"router",pcMainMenu:null,pcSliderNavigator:null,pageContainer:null,loadingSimpleDom:null,currentPage:null,indexShouldLoad:null,moduleNotInMenu:["search","quickSetup","quickSetupAp","index"],convert:(u=function(e){for(var t=0;t<e.length;t++){var a=e[t].text,n=l.su.CHAR.MENU_ITEMS_NAME[a];n!==undefined?e[t].text=n:l.su.debug.warn("'"+e[t].name+"' has no menu name text defined in $.su.CHAR"),e[t].children&&u(e[t].children)}},function(e){u(e)}),_hashItems:function(){var e=r;"array"===l.type(e)&&function u(e,t,a){for(var n=e.length,o=0;o<n;o++){var i=e[o],r=i.name,s=t.slice(0);s.push(r),a[r]={path:s,self:i},i.children&&u(i.children,s,a)}}(e,[],s={})},loadNavigatorData:function(t,a){l.get(this.navigatorUrl[t],null,function(e){n.currentMode=t,n.convert(e),n.loadItems(e),a&&a(e)},"json")},loadItems:function(e){r=e,this._hashItems(),this.pcMainMenu&&this.pcMainMenu.loadItems(this._calcMainNavigatorItems()),this.pcSliderNavigator&&this.pcSliderNavigator.loadItems(this._calcSliderNavigatorItems())},getItems:function(){return r},getItemsInfo:function(){return s},mainMenuClicked:function(e,t){return i.moduleManager.hasModule(e)?this.goTo(e):t?this.currentPage&&s[this.currentPage]&&s[this.currentPage].path[0]==e?this._syncNavigatorView(this.currentPage):this.pcSliderNavigator.loadItems(this._calcSliderNavigatorItems(e)||[]):this.goTo(this._getDefaultPage(e)),s[e]&&s[e].self},pcNavigatorClicked:function(e){return i.moduleManager.hasModule(e)&&this.goTo(e),s[e].self},mobileNavigatorClicked:function(e){i.moduleManager.hasModule(e)&&(this.goTo(e),this.mobileNavigator.hide())},_calcMainNavigatorItems:function(){return r.push({name:"search",text:l.su.CHAR.COMMON.SEARCH,cls:"search"},{name:"logout",text:l.su.CHAR.INDEX.LOGOUT,cls:"logout"}),r},_calcSliderNavigatorItems:function(e){return e?s[e].self.children:[]},_calcMobileNavigatorItems:function(){var e=r.slice(0);return e.push({name:"search",text:l.su.CHAR.COMMON.SEARCH}),e},_getMainMenuDefaultPage:function(e){return"router"==n.currentMode?"networkStatus":"networkMap"},_getDefaultPage:function(e){if(e){for(var t=0;t<n.moduleNotInMenu.length;t++)if(n.moduleNotInMenu[t]==e)return e;var a=n.getItemsInfo()[e];if(a){for(a=a.self;!i.moduleManager.hasModule(a.name)&&a.children&&0<a.children.length;)a=a.children[0];return a.name}return this._getMainMenuDefaultPage(e)}return this._getMainMenuDefaultPage(e)},_getFirstChildrenPage:function(e){return s[e]&&s[e].self?s[e].self.children?this._getFirstChildrenPage(s[e].self.children[0].name):e:this._getMainMenuDefaultPage(e)},goTo:function(e){var t,a=this;""!=e&&("mapInternet"!==e&&"mapClients"!==e||(t=e),"quickSetup"===(e=a._getDefaultPage(e))||"login"===e||"quickSetupAp"===e?o.main.loadBasicModule(e,function(){a.currentPage=e,location.hash=e}):"index"===e?o.main.loadBasicModule(e,function(){a.currentPage=e,location.hash=""}):i.moduleManager.get("index")?(i.moduleManager.get("index").showLoading(),this._syncNavigatorView(e),this.loadPage(e,function(){t&&i.moduleManager.get(e).switchModule(t.slice(3).toLowerCase()),i.moduleManager.get("index").hideLoading()})):a.indexShouldLoad=e)},_syncNavigatorView:function(e,t){var a=s[e];if(!a)return this.pcMainMenu.unSelectAll(),void this.pcSliderNavigator.loadItems([]);var n=a.path,o=n.length;if(!this.currentPage||!s[this.currentPage]||s[this.currentPage].path[0]!=n[0]||"quickSetup"==this.currentPage||"quickSetupAp"==this.currentPage){var i=this._calcSliderNavigatorItems(n[0]);i&&0<i.length?this.pcSliderNavigator&&this.pcSliderNavigator.loadItems(i):this.pcSliderNavigator&&this.pcSliderNavigator.loadItems([])}switch(o){case 1:this.pcMainMenu.select(n[0]);break;case 2:this.pcMainMenu.select(n[0]),this.pcSliderNavigator.select(n[1]);break;case 3:this.pcMainMenu.select(n[0]),this.pcSliderNavigator.open(n[1]),this.pcSliderNavigator.select(n[2])}},loadPage:function(e,t){var a=this;this.currentPage=e,location.hash=e,i.moduleLoader.load({module:"index"},{module:e},this.pageContainer,function(){a.pageContainer.removeClass(function(e,t){var a=t.match(/\bmodule-\w*\b/g);if(a)return a[0]}).addClass("module-"+e),l.isFunction(t)&&t()})},getCurrentPage:function(){return this.currentPage}}})}(jQuery),function(s){s.su.moduleManager.define("search",{services:["moduleLoader","moduleManager","ajax"],stores:["searchResult"],deps:["navigatorController","index"],views:["searchView"],listeners:{"ev_on_launch":function(e,t,a,n,o,i,r){s(".page").addClass("no-bottom"),o.searchResult.hide(),o.searchResult.loadData([])},"ev_before_view_unload":function(){s(".page").removeClass("no-bottom")}},init:function(t,e,a,n,o,i){this.control({"#search-keyword":{"keyup":function(e){"Enter"!==e.key&&13!==e.keyCode||t.beginSearch()}},"#begin-search":{"ev_button_click":"beginSearch"}})}},function(l,e,t,a,n,o){return{menuMap:s.extend({},n.navigatorController.getItemsInfo(),{mapInternet:{path:["networkMap"],self:{name:"networkMap",text:"Network Map"}},mapClients:{path:["networkMap"],self:{name:"networkMap",text:"Network Map"}}}),beginSearch:function(){a.searchResult.show();var i=e.searchView.searchKeyword.getValue();if(i){var r=[];s.each(l.menuMap,function(e,t){var a=t.self.text;if(l.testMatch(a,i)&&r.push(l.generatePageItem({name:e,menuPath:t.path})),l.searchItemMap[e]){var n=l.searchItemMap[e].character,o=l.searchChar(n,i);0<o.length&&(r=r.concat(l.generateSearchStringItems({name:e,menuPath:t.path},o)))}}),a.searchResult.loadData(r),a.searchResult.setSearchWorld(i)}else a.searchResult.loadData([])},searchChar:function(e,t){var a=[];for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];if("string"==typeof o){if(o.match(/^_/)||o.match(/_err$/i))continue;l.testMatch(o,t)&&a.push({string:o,introduction:l.getSearchStringInstroduction(e,n)})}else"object"==typeof o&&(a=a.concat(l.searchChar(o,t)))}return a},testMatch:function(e,t){if("string"==typeof t)return 0<=e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())},getPageInstroduction:function(e){return l.searchItemMap[e]&&l.searchItemMap[e].introduction||""},getSearchStringInstroduction:function(e,t){return e[t+"_INSTRODUCTION"]||""},generatePageItem:function(e){for(var t=[],a=e.name,n=e.menuPath,o=n.length,i=0;i<o;i++)t.push(l.menuMap[n[i]].self.text);return{name:a,path:t,introduction:l.getPageInstroduction(a)}},generateSearchStringItems:function(e,t){for(var a=[],n=[],o=e.name,i=e.menuPath,r=0,s=i.length;r<s;r++)n.push(l.menuMap[i[r]].self.text);for(s=t.length,r=0;r<s;r++){var u=n.slice(0);u.push(t[r].string),a.push({name:o,path:u,introduction:t[r].introduction})}return a},searchItemMap:{mapInternet:{character:s.su.CHAR.MAP_INTERNET},networkMap:{character:s.su.CHAR.NETWORK_MAP},mapClients:{character:s.su.CHAR.MAP_CLIENT},networkStatus:{character:s.su.CHAR.NETWORK_STATUS,introduction:s.su.CHAR.NETWORK_STATUS.STATUS_INSTRUCTION},firmwareDeco:{character:s.su.CHAR.FIRMWARE,introduction:s.su.CHAR.FIRMWARE.UPGRADE_TIP},sysLog:{character:s.su.CHAR.SYSTEM_LOG,introduction:s.su.CHAR.SYSTEM_LOG.SYSTEM_LOG_INSTRUCTION},timeSettings:{character:s.su.CHAR.TIMESETTING,introduction:s.su.CHAR.TIMESETTING.LANGUAGE_TIP+" "+s.su.CHAR.TIMESETTING.SYSTEM_TIME_TIP},reboot:{character:s.su.CHAR.REBOOT,introduction:s.su.CHAR.REBOOT.REBOOT_TIP}}}})}(jQuery),$.su.storeManager.define("searchResult",{type:"store",fields:[{name:"name"},{name:"path"},{name:"introduction"}],data:[]});